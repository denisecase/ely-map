<!DOCTYPE html>
<html lang="en">

<head>
	<base target="_top">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Ely</title>

	<link rel="shortcut icon" type="image/x-icon" href="images/favicon_io/favicon.ico" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.1/dist/leaflet.css"
		integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.9.1/dist/leaflet.js"
		integrity="sha256-NDI0K41gVbWqfkkaHj15IzU7PtMoelkzyKp8TOaFQ3s=" crossorigin=""></script>

	<style>
		html,
		body {
			box-sizing: border-box;
			height: 100%;
			min-height: 100%;
			font: 1.2em / 1.5 Helvetica Neue, Helvetica, Arial, sans-serif;
			font-weight: 300;
			margin: 0;
			padding: 0;
			display: flex;
			flex-direction: column;
			align-items: center;
		}

		.page-header,
		.page-footer {
			flex-grow: 0;
			flex-shrink: 0;
			padding: 20px;
			justify-content: center;

		}

		.page-body {
			flex-grow: 1;
		}
	</style>
</head>

<body>

	<header class="page-header">Special Places in Ely, MN</header>

	<main class="page-body">
		<div id="map" style="width: 600px; height: 400px;"></div>
	</main>

	<footer class="page-footer">
		<a href="https://github.com/denisecase/ely-map"><img src="https://cdn-icons-png.flaticon.com/512/25/25231.png"
				alt="GitHub" width="20" height="20"> </a>
	</footer>


	<script>
		const ely_latitude = 47.903236;
		const ely_longitude = -91.867088;
		const ely_city = 'Ely';
		const ely_state = 'MN';
		const zoom_initial = 13;
		const zoom_max = 19;

		/**
	 * https://dev.to/joelbonetr/structs-in-javascript-1p9l
	 * @constructor Generates a constructor for a given data structure
	 * @param {string} keys separated by a comma + whitespace. struct('id, name, age')
	 * @returns {constructor} Constructor for the new struct
	 */
		function makeStruct(keys) {
			if (!keys) return null;
			const k = keys.split(', ');
			const count = k.length;

			/** @constructor */
			function constructor() {
				for (let i = 0; i < count; i++) this[k[i]] = arguments[i];
			}
			return constructor;
		}

		const loc = new makeStruct("id, name, address, city, state, zipcode, country, latitude, longitude");
		const ggpa = new loc(1, 'GGPa', '708 E. Boundary St', 'Ely', 'MN', '55731', 'USA', 47.896723213329864, -91.85621273054721);
		const clusiau = new loc(2, 'Ely Clusiau', '105 E. White St', 'Ely', 'MN', '55731', 'USA', 47.89992555481349, -91.8652694);
		const oldlibrary = new loc(3, 'Old Ely Library', '30 S 1St Ave E', 'Ely', 'MN', '55731', 'USA',47.90183459557647, -91.86511870171158);
		const ruby = new loc(3, "Ruby's old house", '233 E Harvey St', 'Ely', 'MN', '55731', 'USA',47.901629019335815, -91.86327746758185);
		const honey = new loc(3, "Honey's old house" , '237 E Harvey St', 'Ely', 'MN', '55731', 'USA',47.90165419367751, -91.86312189946675);
		const connie = new loc(3, "Connie's apartment" , 'Camp St', 'Ely', 'MN', '55731', 'USA',);

		const map = L.map('map').setView([ely_latitude, ely_longitude], zoom_initial);

		// const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		// 	maxZoom: zoom_max,
		// 	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		// }).addTo(map);

		const gmapLayer = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
			maxZoom: zoom_max,
			subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
			attribution: '&copy; <a href="https://mapsplatform.google.com/">Google Maps</a>'
		}).addTo(map);

		var marker = L.marker([ggpa.latitude, ggpa.longitude]).addTo(map)
			.bindPopup("♥ GGPa's home.♥<br><br>" + ggpa.address).openPopup();

		var marker = L.marker([clusiau.latitude, clusiau.longitude]).addTo(map)
			.bindPopup("♥ Eleanor's home where she and Arlie<br>raised Marilyn and Shirley.♥<br><br>" + clusiau.address).openPopup();
		
		var marker = L.marker([ruby.latitude, ruby.longitude]).addTo(map)
			.bindPopup("♥ Ruby Marie Hall Nikkola's old home.♥<br><br>" + ruby.address).openPopup();
		
		var marker = L.marker([honey.latitude, honey.longitude]).addTo(map)
			.bindPopup("♥ Honey and Sinky's old home.♥<br><br>" + honey.address).openPopup();

		var marker = L.marker([oldlibrary.latitude, oldlibrary.longitude]).addTo(map)
			.bindPopup("♥ Old Ely library.♥<br><br>♥ <a href='images/old_ely_library_meeting.png'>Photo</a> ♥<br><br>" + oldlibrary.address).openPopup();
		
		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent('You clicked the map at ' + e.latlng.toString())
				.openOn(map);
		}

		map.on('click', onMapClick);

	</script>
</body>

</html>
